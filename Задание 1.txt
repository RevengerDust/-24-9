import kotlin.math.max

fun main() {
    println("=== Калькулятор комиссии за денежный перевод ===")
    println("По условию задачи: комиссия 0.75%, минимум 35 рублей")
    println()


    var amount1 = 10000L // 100 рублей = 10000 копеек
    println("Пример 1:")
    println("Сумма перевода: ${amount1} копеек (${formatToRubles(amount1)})")
    val commission1 = calculateCommission(amount1)
    println("Комиссия: ${commission1} копеек (${formatToRubles(commission1)})")
    println("Итого к списанию: ${amount1 + commission1} копеек (${formatToRubles(amount1 + commission1)})")
    println()


    val amount2 = 5000L // 50 рублей
    println("Пример 2:")
    println("Сумма перевода: ${amount2} копеек (${formatToRubles(amount2)})")
    val commission2 = calculateCommission(amount2)
    println("Комиссия: ${commission2} копеек (${formatToRubles(commission2)})")
    println("Итого: ${amount2 + commission2} копеек (${formatToRubles(amount2 + commission2)})")
    println()


    val amount3 = 1000L // 10 рублей
    println("Пример 3:")
    println("Сумма перевода: ${amount3} копеек (${formatToRubles(amount3)})")
    val commission3 = calculateCommission(amount3)
    println("Комиссия: ${commission3} копеек (${formatToRubles(commission3)})")
    println("Итого: ${amount3 + commission3} копеек (${formatToRubles(amount3 + commission3)})")
    println()


   
    val input = readlnOrNull()
    if (input != null) {
        try {
            val rubles = input.replace(",", ".").toDouble()
            val amountInKopecks = (rubles * 100).toLong()
            println("\nРасчет для суммы: ${rubles} руб.")
            println("Сумма в копейках: ${amountInKopecks}")
            val calculatedCommission = calculateCommission(amountInKopecks)
            println("Комиссия: ${calculatedCommission} коп. (${formatToRubles(calculatedCommission)})")
            println("Всего к оплате: ${amountInKopecks + calculatedCommission} коп. (${formatToRubles(amountInKopecks + calculatedCommission)})")
        } catch (e: NumberFormatException) {
            println("Ошибка: введите корректное число")
        }
    }
}


fun calculateCommission(amount: Long): Long {
    if (amount <= 0) return 0L
    
    val minCommission = 3500L 
       val commissionPercentage = (amount * 0.75) / 100
    

    return max(commissionPercentage.toLong(), minCommission)
}

 
fun formatToRubles(kopecks: Long): String {
    val rubles = kopecks / 100
    val cents = kopecks % 100
    
    return when {
        cents == 0L -> "$rubles рублей"
        cents < 10 -> "$rubles.0${cents} рубля"
        else -> "$rubles.${cents} рубля"
    }
}


fun calculateCommissionForRubles(rubles: Double): Long {
    val kopecks = (rubles * 100).toLong()
    return calculateCommission(kopecks)
}


fun testDifferentValues() {
    println("\n=== Тестовые расчеты ===")
    
    val testAmounts = listOf(
        1000L to "10 рублей",
        3500L to "35 рублей",
        4666L to "46.66 рублей (граничное значение)",
        5000L to "50 рублей",
        10000L to "100 рублей",
        50000L to "500 рублей",
        100000L to "1000 рублей"
    )
    
    for ((amount, description) in testAmounts) {
        val commission = calculateCommission(amount)
        println("${description}: ${amount} коп. -> комиссия ${commission} коп. (${formatToRubles(commission)})")
    }
}
